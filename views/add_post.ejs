<%- include('header', {}); %>

<h1>Add Post</h1>

<% if (errors && typeof errors == 'object') { %>
	<ul>
  	<% for(var k in errors){ %>
  		<li><%= errors[k].msg; %></li>
  	<% } %>
  	</ul>
<% } %>

<form method="POST" action="/posts/add">
	<div class="form-group">
		<label>Title:</label>
		<input type="text" name="title" 
			<% if (fields) { %> value="<%= fields.title; %>" <% } %>
		/>
	</div>
	<div class="form-group">
		<label>Category:</label>

		<select name="category">
			<option 
				<% if (!fields || !fields.category){ %>
				selected="1" 
				<% } %>
				disabled="disabled">Select Category
			</option>
			<% for(var k in cats){ %>
				<option value="<%= cats[k].slug %>"  
					<% if (fields && fields.category && fields.category == cats[k].slug){ %>
					selected="1"
					<% } %>
				><%= cats[k].name %></option>
			<% } %>
		</select>
	</div>
	</div>
	<div class="form-group">
		<label>Author:</label>
		<input type="text" name="author" 
			<% if (fields) { %> value="<%= fields.author; %>" <% } %>
		/>
	</div>
	</div>
	<div class="form-group">
		<label>Content</label>
		<textarea name="content" rows="4"><% if (fields) { %><%= fields.content; %> <% } %></textarea>
	</div>
	<input type="submit" value="Submit">
</form>

<%- include('footer', {}); %>